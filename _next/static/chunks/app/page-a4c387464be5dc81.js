(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1937:function(e,a,t){Promise.resolve().then(t.bind(t,1371))},1371:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return o}});var s=t(7437),l=t(2265),n=t(3464);function r(e){var a,t;let{apiBase:r}=e,[c,i]=(0,l.useState)([]),[d,o]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),[h,u]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[b,j]=(0,l.useState)(null),[y,v]=(0,l.useState)(!1);(0,l.useEffect)(()=>{n.Z.get("".concat(r,"/weeks")).then(e=>{let a=e.data.weeks;i(a),a.length>0&&o(Math.max(...a))}).catch(e=>console.error("Error loading weeks:",e))},[r]),(0,l.useEffect)(()=>{d&&n.Z.get("".concat(r,"/week/").concat(d)).then(e=>{x(e.data),e.data.teams&&e.data.teams.length>=2&&(u(e.data.teams[0].name),g(e.data.teams[1].name))}).catch(e=>console.error("Error loading week data:",e))},[d,r]),(0,l.useEffect)(()=>{h&&p&&r&&(v(!0),n.Z.get("".concat(r,"/compare/").concat(encodeURIComponent(h),"/").concat(encodeURIComponent(p))).then(e=>{j(e.data),v(!1)}).catch(e=>{console.error("Error comparing teams:",e),v(!1)}))},[h,p,r]);let N=(null==m?void 0:m.teams)||[];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Select Week:"}),(0,s.jsx)("select",{value:d||"",onChange:e=>o(Number(e.target.value)),className:"bg-gray-700 text-white px-4 py-2 rounded w-full md:w-auto",children:c.map(e=>(0,s.jsxs)("option",{value:e,children:["Week ",e]},e))})]}),N.length>0&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Team 1:"}),(0,s.jsx)("select",{value:h,onChange:e=>u(e.target.value),className:"w-full bg-gray-700 text-white px-4 py-2 rounded",children:N.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.team_id))})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Team 2:"}),(0,s.jsx)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full bg-gray-700 text-white px-4 py-2 rounded",children:N.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.team_id))})]})]}),y&&(0,s.jsx)("div",{className:"text-center py-8",children:"Loading comparison..."}),b&&!y&&(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:b.team1.name}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Category Wins Ranking"}),(0,s.jsxs)("p",{children:["Teams Beaten: ",b.team1.total_teams_beaten]}),(0,s.jsxs)("p",{children:["Total Category Wins: ",b.team1.total_category_wins]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Minutes Played"}),(0,s.jsxs)("p",{children:["Total: ",b.team1.minutes_played.toFixed(1)," min"]}),(0,s.jsxs)("p",{children:["vs ",b.team1.opponent_name,": ",(null===(a=b.team1.minutes_vs_opponent)||void 0===a?void 0:a.toFixed(1))||"N/A"," min"]}),(0,s.jsxs)("p",{children:["vs League Avg: ",b.team1.minutes_vs_league_avg>0?"+":"",b.team1.minutes_vs_league_avg.toFixed(1)," min"]})]}),Object.keys(b.team1.matchup_details||{}).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Matchup Details"}),Object.entries(b.team1.matchup_details).slice(0,3).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"mb-2 text-sm",children:[(0,s.jsxs)("p",{className:"font-medium",children:[a,": ",t.won,"-",t.lost]}),t.won_cats.length>0&&(0,s.jsxs)("p",{className:"text-gray-400",children:["Won: ",t.won_cats.join(", ")]}),t.lost_cats.length>0&&(0,s.jsxs)("p",{className:"text-gray-400",children:["Lost: ",t.lost_cats.join(", ")]})]},a)})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:b.team2.name}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Category Wins Ranking"}),(0,s.jsxs)("p",{children:["Teams Beaten: ",b.team2.total_teams_beaten]}),(0,s.jsxs)("p",{children:["Total Category Wins: ",b.team2.total_category_wins]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Minutes Played"}),(0,s.jsxs)("p",{children:["Total: ",b.team2.minutes_played.toFixed(1)," min"]}),(0,s.jsxs)("p",{children:["vs ",b.team2.opponent_name,": ",(null===(t=b.team2.minutes_vs_opponent)||void 0===t?void 0:t.toFixed(1))||"N/A"," min"]}),(0,s.jsxs)("p",{children:["vs League Avg: ",b.team2.minutes_vs_league_avg>0?"+":"",b.team2.minutes_vs_league_avg.toFixed(1)," min"]})]}),Object.keys(b.team2.matchup_details||{}).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Matchup Details"}),Object.entries(b.team2.matchup_details).slice(0,3).map(e=>{let[a,t]=e;return(0,s.jsxs)("div",{className:"mb-2 text-sm",children:[(0,s.jsxs)("p",{className:"font-medium",children:[a,": ",t.won,"-",t.lost]}),t.won_cats.length>0&&(0,s.jsxs)("p",{className:"text-gray-400",children:["Won: ",t.won_cats.join(", ")]}),t.lost_cats.length>0&&(0,s.jsxs)("p",{className:"text-gray-400",children:["Lost: ",t.lost_cats.join(", ")]})]},a)})]})]})]})]})]})}function c(e){let{apiBase:a}=e,[t,r]=(0,l.useState)(null),[c,i]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[m,x]=(0,l.useState)([]),[h,u]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{n.Z.get("".concat(a,"/league/summary")).then(e=>{r(e.data),o(e.data.current_matchup_period),u(!1)}).catch(e=>{console.error("Error loading summary:",e),u(!1)}),n.Z.get("".concat(a,"/weeks")).then(e=>x(e.data.weeks)).catch(e=>console.error("Error loading weeks:",e))},[a]),(0,l.useEffect)(()=>{d&&n.Z.get("".concat(a,"/week/").concat(d)).then(e=>i(e.data)).catch(e=>console.error("Error loading week data:",e))},[d,a]),h)return(0,s.jsx)("div",{className:"text-center py-8",children:"Loading league data..."});if(!t)return(0,s.jsx)("div",{className:"text-center py-8 text-red-400",children:"Error loading league data"});let p=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=[...a].sort((e,a)=>t?a-e:e-a),l=s.findIndex(a=>t?a<=e:a>=e);return -1===l?100:Math.round((1-l/s.length)*100)},g=t.teams.map(e=>{var a,t,s,l;let n=null==c?void 0:null===(a=c.teams)||void 0===a?void 0:a.find(a=>a.name===e.name),r=(null==c?void 0:null===(t=c.teams)||void 0===t?void 0:t.map(e=>e.total_teams_beaten))||[],i=(null==c?void 0:null===(s=c.teams)||void 0===s?void 0:s.map(e=>e.total_category_wins))||[],d=(null==c?void 0:null===(l=c.teams)||void 0===l?void 0:l.map(e=>e.minutes_played))||[];return{...e,weekData:n,teams_beaten_percentile:n?p(n.total_teams_beaten,r):null,category_wins_percentile:n?p(n.total_category_wins,i):null,minutes_percentile:n?p(n.minutes_played,d):null}});return(0,s.jsxs)("div",{className:"space-y-6",children:[m.length>0&&(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg",children:[(0,s.jsx)("label",{className:"block mb-2",children:"Select Week:"}),(0,s.jsx)("select",{value:d||"",onChange:e=>o(Number(e.target.value)),className:"bg-gray-700 text-white px-4 py-2 rounded",children:m.map(e=>(0,s.jsxs)("option",{value:e,children:["Week ",e]},e))})]}),(0,s.jsx)("div",{className:"bg-gray-800 rounded-lg overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Rank"}),(0,s.jsx)("th",{className:"px-4 py-3 text-left",children:"Team"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Record"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Win %"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Teams Beaten"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Teams Beaten %ile"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Category Wins"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Category Wins %ile"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Minutes"}),(0,s.jsx)("th",{className:"px-4 py-3 text-right",children:"Minutes %ile"})]})}),(0,s.jsx)("tbody",{children:g.map((e,a)=>{var t,l,n;return(0,s.jsxs)("tr",{className:"border-t border-gray-700 hover:bg-gray-750",children:[(0,s.jsx)("td",{className:"px-4 py-3",children:e.rank}),(0,s.jsx)("td",{className:"px-4 py-3 font-medium",children:e.name}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right",children:[e.wins,"-",e.losses,"-",e.ties]}),(0,s.jsxs)("td",{className:"px-4 py-3 text-right",children:[e.win_percentage,"%"]}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(null===(t=e.weekData)||void 0===t?void 0:t.total_teams_beaten)||"N/A"}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:null!==e.teams_beaten_percentile?"".concat(e.teams_beaten_percentile,"%"):"N/A"}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(null===(l=e.weekData)||void 0===l?void 0:l.total_category_wins)||"N/A"}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:null!==e.category_wins_percentile?"".concat(e.category_wins_percentile,"%"):"N/A"}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:(null===(n=e.weekData)||void 0===n?void 0:n.minutes_played)?e.weekData.minutes_played.toFixed(1):"N/A"}),(0,s.jsx)("td",{className:"px-4 py-3 text-right",children:null!==e.minutes_percentile?"".concat(e.minutes_percentile,"%"):"N/A"})]},e.name)})})]})})]})}function i(e){let{apiBase:a,onClose:t}=e,[r,c]=(0,l.useState)([{role:"assistant",content:"Hello! I can help you analyze fantasy basketball data. Ask me anything about teams, players, or matchups!"}]),[i,d]=(0,l.useState)(""),[o,m]=(0,l.useState)(!1),x=(0,l.useRef)(null),h=()=>{var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,l.useEffect)(()=>{h()},[r]);let u=async()=>{if(!i.trim()||o)return;let e=i.trim();d(""),c(a=>[...a,{role:"user",content:e}]),m(!0);try{let t=await n.Z.post("".concat(a,"/chatbot"),{query:e});c(e=>[...e,{role:"assistant",content:t.data.response||"Sorry, I could not generate a response."}])}catch(e){c(a=>{var t,s;return[...a,{role:"assistant",content:"Error: ".concat((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||e.message||"Unknown error")}]})}finally{m(!1)}};return(0,s.jsxs)("div",{className:"fixed right-0 top-0 h-full w-full md:w-96 bg-gray-800 border-l border-gray-700 flex flex-col z-50",children:[(0,s.jsxs)("div",{className:"bg-gray-700 p-4 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-bold",children:"Analytics Chatbot"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-white",children:"âœ•"})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[r.map((e,a)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-700 text-gray-100"),children:e.content})},a)),o&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-700 rounded-lg p-3",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,s.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,s.jsx)("div",{ref:x})]}),(0,s.jsx)("div",{className:"border-t border-gray-700 p-4",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:i,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&u(),placeholder:"Ask about teams, players, matchups...",className:"flex-1 bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:o}),(0,s.jsx)("button",{onClick:u,disabled:o||!i.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 px-4 py-2 rounded-lg",children:"Send"})]})})]})}let d="https://laspuntas.onrender.com/api";function o(){let[e,a]=(0,l.useState)("compare"),[t,n]=(0,l.useState)(!1);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white",children:[(0,s.jsx)("header",{className:"bg-gray-800 border-b border-gray-700 p-4",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"\uD83C\uDFC0 Fantasy Basketball Analytics"}),(0,s.jsxs)("button",{onClick:()=>n(!t),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg",children:[t?"Close":"Open"," Chatbot"]})]})}),(0,s.jsxs)("main",{className:"container mx-auto p-4 pb-20",children:[(0,s.jsxs)("div",{className:"flex space-x-4 mb-6 border-b border-gray-700",children:[(0,s.jsx)("button",{onClick:()=>a("compare"),className:"px-4 py-2 ".concat("compare"===e?"border-b-2 border-blue-500":""),children:"Team vs Team"}),(0,s.jsx)("button",{onClick:()=>a("rankings"),className:"px-4 py-2 ".concat("rankings"===e?"border-b-2 border-blue-500":""),children:"Team vs League"})]}),"compare"===e&&(0,s.jsx)(r,{apiBase:d}),"rankings"===e&&(0,s.jsx)(c,{apiBase:d})]}),t&&(0,s.jsx)(i,{apiBase:d,onClose:()=>n(!1)})]})}}},function(e){e.O(0,[464,971,117,744],function(){return e(e.s=1937)}),_N_E=e.O()}]);